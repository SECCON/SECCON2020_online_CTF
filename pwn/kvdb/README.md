# KVDB

## テーマ
コピーGCで発生するダングリングポインタ

### 難易度
easy ~ medium

## 脆弱性
ヒープオーバーフロー

### プログラムの特徴
1. 確保したプールが不足すると GC が発生
    - 2倍に拡張
    - 必要なメモリ量が現在の 1/4 以下だと縮小
1. GC が発生すると別の領域を確保して、生きているオブジェクのデータが移されてポインタも更新される
2. Delete 済みのエントリにデータの領域を指すポインタが残されている
3. 一度削除した key と同一の key でデータを登録するとエントリが再利用される
4. エントリ内のデータ領域を再度利用する際には、メモリプール内にポインタが存在することとサイズがチェックされる
    - 終端が領域内かどうかは見ていない

## 解答までの流れ
1. 一度エントリを作成して削除する
2. GC を複数回発生させ、削除済みエントリが指す領域と同じ領域を利用するようにする（シュリンクさせる）
3. Delete 済みエントリの再登録
4. サイズによってはチャンクの領域外まで書き込み可能

## 問題文

## FLAG
`SECCON{r3u53_d4ngl1ng_p01n73r5!!}`
